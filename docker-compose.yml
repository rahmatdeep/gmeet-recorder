services:
  recorder:
    build: .
    image: rahmatdeep/gmeet-recorder:latest
    ipc: host # Important for Chrome memory sharing
    shm_size: '2gb' # Prevent crashes due to shared memory issues
    volumes:
      - ./recordings:/app/recordings
    environment:
      - CI=true
      - MAX_DURATION_MINUTES=15 # Default: Auto-exit after 15 minutes
    # Default command, can be overridden
    # Example: docker-compose run --rm recorder bun meet.ts <url> <name>
    command: [ "bun", "meet.ts" ]
